/*!
 * ihavecookies - jQuery plugin for displaying cookie/privacy message
 * v0.3.2
 *
 * Copyright (c) 2018 Ketan Mistry (https://iamketan.com.au)
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * - Updated so that the settings reflects the already set preferences.
 * - Added button to reopen the cookie preferences
 *   Kim Steinhaug / kim@steinhaug.com 
 * 
 */
!function(s){s.fn.ihavecookies=function(e){var o=s(this),i=s.extend({forceDisplayPanel:!1,fixedCookieTypeLabel:"Nødvendige",fixedCookieTypeDesc:"Informasjonskapslene er nødvendig for å kunne logge deg inn i butikken og at funksjonalitet som handlekurven i det hele tatt fungerer.",cookieTypes:[{type:"Innstillinger",value:"preferences",description:"Informasjonskapsler kan fortelle oss hvilket språk du foretrekker, i tillegg til kommunikasjonsinnstillingene dine. De kan også gjøre det enklere å fylle ut skjemaer."},{type:"Statistikk",value:"analytics",description:"Informasjonskapsler gjør at vi kan finne ut hvor godt nettstedet og plugins fungerer på ulike steder. I tillegg bruker vi informasjonskapsler til å bedre forstå, forbedre, og utforske produkter, funksjoner og tjenester."},{type:"Markedsføring",value:"marketing",description:"Vi kan bruke informasjonskapsler til å vise deg relevante annonser. Vi kan også bruke en informasjonskapsel til å finne ut hvorvidt noen som så en annonse på en av våre samarbeidspartneres nettsider, kom tilbake senere og utførte en handling (f.eks. gjennomførte et kjøp)."}],title:"&#x1F36A; Litt om cookies / informasjonkapsler",message:"Våre nettsider benytter og har lagret informasjonskapsler, men du kan skru dem av om du ønsker. Du kan lese mer om våres bruk av cookies i våres ",link:"/legal/cookie-policy.php",moreInfoLabel:"cookie policy",delay:600,expires:30,acceptBtnLabel:"Godta og lagre",advancedBtnLabel:"Innstillinger",cookieTypesTitle:"Informasjonskapsler du samtykker til:",uncheckBoxes:!1,onAccept:function(){s.fn.ihavecookies.preference("analytics")}},e),n=d("cookieControl"),r=d("cookieControlPrefs");if(n&&r&&!i.forceDisplayPanel){var t=!0;"false"==n&&(t=!1),p(t,i.expires)}else{n=d("cookieControl");var a='<li><input type="checkbox" name="gdpr[]" value="necessary" checked="checked" disabled="disabled"> <label title="'+i.fixedCookieTypeDesc+'">'+i.fixedCookieTypeLabel+"</label></li>";s.each(i.cookieTypes,function(e,o){if(""!==o.type&&""!==o.value){var n="";!1!==o.description&&(n=' title="'+o.description+'"'),a+='<li><input type="checkbox" id="gdpr-cookietype-'+o.value+'" name="gdpr[]" value="'+o.value+'" data-auto="on"> <label for="gdpr-cookietype-'+o.value+'"'+n+">"+o.type+"</label></li>"}});var c='<div id="gdpr-cookie-message"><h4>'+i.title+"</h4><p>"+i.message+' <a href="'+i.link+'">'+i.moreInfoLabel+'</a><div id="gdpr-cookie-types" style="display:none;"><h5>'+i.cookieTypesTitle+"</h5><ul>"+a+'</ul></div><p><button id="gdpr-cookie-advanced" type="button">'+i.advancedBtnLabel+'</button><button id="gdpr-cookie-accept" type="button">'+i.acceptBtnLabel+"</button></p></div>";setTimeout(function(){s(o).append(c),s("#gdpr-cookie-message").hide().fadeIn("slow")},i.delay),s("body").on("click","#gdpr-cookie-accept",function(){p(!0,i.expires),r?(s('input[name="gdpr[]"][data-auto="on"]').prop("checked",!1),"on"==s("#gdpr-cookietype-marketing").data("auto")&&!0===s.fn.ihavecookies.preference("marketing")&&s("#gdpr-cookietype-marketing").prop("checked",!0),"on"==s("#gdpr-cookietype-preferences").data("auto")&&!0===s.fn.ihavecookies.preference("preferences")&&s("#gdpr-cookietype-preferences").prop("checked",!0),"on"==s("#gdpr-cookietype-analytics").data("auto")&&!0===s.fn.ihavecookies.preference("analytics")&&s("#gdpr-cookietype-analytics").prop("checked",!0)):s('input[name="gdpr[]"][data-auto="on"]').prop("checked",!0);var n=[];s.each(s('input[name="gdpr[]"]').serializeArray(),function(e,o){n.push(o.value)}),k("cookieControlPrefs",JSON.stringify(n),365),i.onAccept.call(this)}),s("body").on("click","#gdpr-cookie-advanced",function(){s('input[name="gdpr[]"]:not(:disabled)').attr("data-auto","off").prop("checked",!1),!0===s.fn.ihavecookies.preference("marketing")&&s("#gdpr-cookietype-marketing").prop("checked",!0),!0===s.fn.ihavecookies.preference("preferences")&&s("#gdpr-cookietype-preferences").prop("checked",!0),!0===s.fn.ihavecookies.preference("analytics")&&s("#gdpr-cookietype-analytics").prop("checked",!0),s("#gdpr-cookie-types").slideDown("fast",function(){s("#gdpr-cookie-advanced").prop("disabled",!0)})})}!0===i.uncheckBoxes&&s('input[type="checkbox"].ihavecookies').prop("checked",!1)},s.fn.ihavecookies.cookie=function(){var e=d("cookieControlPrefs");return JSON.parse(e)},s.fn.ihavecookies.preference=function(e){var o=d("cookieControl"),n=d("cookieControlPrefs");return n=JSON.parse(n),!1!==o&&(!1!==n&&-1!==n.indexOf(e))};var p=function(e,o){k("cookieControl",e,o),s("#gdpr-cookie-message").fadeOut("fast",function(){s(this).remove()})},k=function(e,o,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="expires="+i.toUTCString();return document.cookie=e+"="+o+";"+r+";path=/",d(e)},d=function(e){for(var o=e+"=",n=decodeURIComponent(document.cookie).split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1);if(0===r.indexOf(o))return r.substring(o.length,r.length)}return!1}}(jQuery);
