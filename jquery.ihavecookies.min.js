/*!
 * ihavecookies - jQuery plugin for displaying cookie/privacy message
 * v0.3.2
 *
 * Copyright (c) 2018 Ketan Mistry (https://iamketan.com.au)
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * - Updated so that the settings reflects the already set preferences.
 * - Added button to reopen the cookie preferences
 *   Kim Steinhaug / kim@steinhaug.com 
 * 
 */
!function(e){e.fn.ihavecookies=function(c){var n=e(this),a=e.extend({forceDisplayPanel:!1,fixedCookieTypeLabel:"Necessary",fixedCookieTypeDesc:"These are essential for the website to work correctly.",cookieTypes:[{type:"Site Preferences",value:"preferences",description:"These are cookies that are related to your site preferences, e.g. remembering your username, site colours, etc."},{type:"Analytics",value:"analytics",description:"Cookies related to site visits, browser types, etc."},{type:"Marketing",value:"marketing",description:"Cookies related to marketing, e.g. newsletters, social media, etc"}],title:"&#x1F36A; Implied Consent: Cookies info",message:"We are using and have set cookies, but you can switch them off if you want.",link:"/privacy-policy",moreInfoLabel:"More information",delay:600,expires:30,acceptBtnLabel:"Accept Cookies",advancedBtnLabel:"Customise Cookies",cookieTypesTitle:"Select cookies to accept",uncheckBoxes:!1,onAccept:function(){e.fn.ihavecookies.preference("analytics")===!1}},c),r=t("cookieControl"),p=t("cookieControlPrefs")
if(r&&p&&!a.forceDisplayPanel){var s=!0
"false"==r&&(s=!1),o(s,a.expires)}else{var r=t("cookieControl"),d='<li><input type="checkbox" name="gdpr[]" value="necessary" checked="checked" disabled="disabled"> <label title="'+a.fixedCookieTypeDesc+'">'+a.fixedCookieTypeLabel+"</label></li>"
e.each(a.cookieTypes,function(e,o){if(""!==o.type&&""!==o.value){var i=""
o.description!==!1&&(i=' title="'+o.description+'"'),d+='<li><input type="checkbox" id="gdpr-cookietype-'+o.value+'" name="gdpr[]" value="'+o.value+'" data-auto="on"  checked="checked"> <label for="gdpr-cookietype-'+o.value+'"'+i+">"+o.type+"</label></li>"}})
var l='<div id="gdpr-cookie-message"><h4>'+a.title+"</h4><p>"+a.message+' <a href="'+a.link+'">'+a.moreInfoLabel+'</a><div id="gdpr-cookie-types" style="display:none;"><h5>'+a.cookieTypesTitle+"</h5><ul>"+d+'</ul></div><p><button id="gdpr-cookie-advanced" type="button">'+a.advancedBtnLabel+'</button><button id="gdpr-cookie-accept" type="button">'+a.acceptBtnLabel+"</button></p></div>"
setTimeout(function(){e(n).append(l),e("#gdpr-cookie-message").hide().fadeIn("slow")},a.delay),e("body").on("click","#gdpr-cookie-accept",function(){o(!0,a.expires),p?(e('input[name="gdpr[]"][data-auto="on"]').prop("checked",!1),"on"==e("#gdpr-cookietype-marketing").data("auto")&&e.fn.ihavecookies.preference("marketing")===!0&&e("#gdpr-cookietype-marketing").prop("checked",!0),"on"==e("#gdpr-cookietype-preferences").data("auto")&&e.fn.ihavecookies.preference("preferences")===!0&&e("#gdpr-cookietype-preferences").prop("checked",!0),"on"==e("#gdpr-cookietype-analytics").data("auto")&&e.fn.ihavecookies.preference("analytics")===!0&&e("#gdpr-cookietype-analytics").prop("checked",!0)):e('input[name="gdpr[]"][data-auto="on"]').prop("checked",!0)
var t=[]
e.each(e('input[name="gdpr[]"]').serializeArray(),function(e,o){t.push(o.value)}),i("cookieControlPrefs",JSON.stringify(t),365),a.onAccept.call(this)}),e("body").on("click","#gdpr-cookie-advanced",function(){a.forceDisplayPanel&&e('input[name="gdpr[]"]:not(:disabled)').attr("data-auto","off").prop("checked",!1),e('input[name="gdpr[]"]:not(:disabled)').on("click",function(){e(this).attr("data-auto","off")}),e.fn.ihavecookies.preference("marketing")===!0&&e("#gdpr-cookietype-marketing").prop("checked",!0),e.fn.ihavecookies.preference("preferences")===!0&&e("#gdpr-cookietype-preferences").prop("checked",!0),e.fn.ihavecookies.preference("analytics")===!0&&e("#gdpr-cookietype-analytics").prop("checked",!0),e("#gdpr-cookie-types").slideDown("fast",function(){e("#gdpr-cookie-advanced").prop("disabled",!0)})})}a.uncheckBoxes===!0&&e('input[type="checkbox"].ihavecookies').prop("checked",!1)},e.fn.ihavecookies.cookie=function(){var e=t("cookieControlPrefs")
return JSON.parse(e)},e.fn.ihavecookies.preference=function(e){var o=t("cookieControl"),i=t("cookieControlPrefs")
return i=JSON.parse(i),o===!1?!1:i===!1||-1===i.indexOf(e)?!1:!0}
var o=function(o,t){i("cookieControl",o,t),e("#gdpr-cookie-message").fadeOut("fast",function(){e(this).remove()})},i=function(e,o,i){var c=new Date
c.setTime(c.getTime()+24*i*60*60*1e3)
var n="expires="+c.toUTCString()
return document.cookie=e+"="+o+";"+n+";path=/",t(e)},t=function(e){for(var o=e+"=",i=decodeURIComponent(document.cookie),t=i.split(";"),c=0;c<t.length;c++){for(var n=t[c];" "==n.charAt(0);)n=n.substring(1)
if(0===n.indexOf(o))return n.substring(o.length,n.length)}return!1}}(jQuery)
