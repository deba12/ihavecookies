/*!
 * ihavecookies - jQuery plugin for displaying cookie/privacy message
 * v0.3.2
 *
 * Copyright (c) 2018 Ketan Mistry (https://iamketan.com.au)
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * - Updated so that the settings reflects the already set preferences.
 * - Added button to reopen the cookie preferences
 *   Kim Steinhaug / kim@steinhaug.com 
 * 
 */
!function(a){a.fn.ihavecookies=function(e){var f=a(this),g=a.extend({forceDisplayPanel:!1,fixedCookieTypeLabel:"Necessary",fixedCookieTypeDesc:"These are essential for the website to work correctly.",cookieTypes:[{type:"Site Preferences",value:"preferences",description:"These are cookies that are related to your site preferences, e.g. remembering your username, site colours, etc."},{type:"Analytics",value:"analytics",description:"Cookies related to site visits, browser types, etc."},{type:"Marketing",value:"marketing",description:"Cookies related to marketing, e.g. newsletters, social media, etc"}],title:"&#x1F36A; Implied Consent: Cookies info",message:"We are using and have set cookies, but you can switch them off if you want.",link:"/privacy-policy",moreInfoLabel:"More information",delay:600,expires:30,acceptBtnLabel:"Accept Cookies",advancedBtnLabel:"Customise Cookies",cookieTypesTitle:"Select cookies to accept",uncheckBoxes:!1,onAccept:function(){a.fn.ihavecookies.preference("analytics")===!1},advanced:!1},e),h=d("cookieControl"),i=d("cookieControlPrefs");if(h&&i&&!g.forceDisplayPanel){var l=!0;"false"==h&&(l=!1),b(l,g.expires)}else{var h=d("cookieControl"),j='<li><input type="checkbox" name="gdpr[]" value="necessary" checked="checked" disabled="disabled"> <label title="'+g.fixedCookieTypeDesc+'">'+g.fixedCookieTypeLabel+"</label></li>";a.each(g.cookieTypes,function(a,b){if(""!==b.type&&""!==b.value){var c="";b.description!==!1&&(c=' title="'+b.description+'"'),j+='<li><input type="checkbox" id="gdpr-cookietype-'+b.value+'" name="gdpr[]" value="'+b.value+'" data-auto="on"  checked="checked"> <label for="gdpr-cookietype-'+b.value+'"'+c+">"+b.type+"</label></li>"}});var k='<div id="gdpr-cookie-message"><h4>'+g.title+"</h4><p>"+g.message+' <a href="'+g.link+'">'+g.moreInfoLabel+'</a><div id="gdpr-cookie-types" style="display:none;"><h5>'+g.cookieTypesTitle+"</h5><ul>"+j+'</ul></div><p><button id="gdpr-cookie-advanced" type="button">'+g.advancedBtnLabel+'</button><button id="gdpr-cookie-accept" type="button">'+g.acceptBtnLabel+"</button></p></div>";setTimeout(function(){a(f).append(k),a("#gdpr-cookie-message").hide().fadeIn("slow"),1==g.advanced&&a("button#gdpr-cookie-advanced").trigger("click")},g.delay),a("body").on("click","#gdpr-cookie-accept",function(){b(!0,g.expires),i?(a('input[name="gdpr[]"][data-auto="on"]').prop("checked",!1),"on"==a("#gdpr-cookietype-marketing").data("auto")&&a.fn.ihavecookies.preference("marketing")===!0&&a("#gdpr-cookietype-marketing").prop("checked",!0),"on"==a("#gdpr-cookietype-preferences").data("auto")&&a.fn.ihavecookies.preference("preferences")===!0&&a("#gdpr-cookietype-preferences").prop("checked",!0),"on"==a("#gdpr-cookietype-analytics").data("auto")&&a.fn.ihavecookies.preference("analytics")===!0&&a("#gdpr-cookietype-analytics").prop("checked",!0)):a('input[name="gdpr[]"][data-auto="on"]').prop("checked",!0);var d=[];a.each(a('input[name="gdpr[]"]').serializeArray(),function(a,b){d.push(b.value)}),c("cookieControlPrefs",JSON.stringify(d),365),g.onAccept.call(this)}),a("body").on("click","#gdpr-cookie-advanced",function(){g.forceDisplayPanel&&a('input[name="gdpr[]"]:not(:disabled)').attr("data-auto","off").prop("checked",!1),a('input[name="gdpr[]"]:not(:disabled)').on("click",function(){a(this).attr("data-auto","off")}),a.fn.ihavecookies.preference("marketing")===!0&&a("#gdpr-cookietype-marketing").prop("checked",!0),a.fn.ihavecookies.preference("preferences")===!0&&a("#gdpr-cookietype-preferences").prop("checked",!0),a.fn.ihavecookies.preference("analytics")===!0&&a("#gdpr-cookietype-analytics").prop("checked",!0),a("#gdpr-cookie-types").slideDown("fast",function(){a("#gdpr-cookie-advanced").prop("disabled",!0)})})}g.uncheckBoxes===!0&&a('input[type="checkbox"].ihavecookies').prop("checked",!1)},a.fn.ihavecookies.cookie=function(){var a=d("cookieControlPrefs");return JSON.parse(a)},a.fn.ihavecookies.preference=function(a){var b=d("cookieControl"),c=d("cookieControlPrefs");return c=JSON.parse(c),b===!1?!1:c===!1||-1===c.indexOf(a)?!1:!0};var b=function(b,d){c("cookieControl",b,d),a("#gdpr-cookie-message").fadeOut("fast",function(){a(this).remove()})},c=function(a,b,c){var e=new Date;e.setTime(e.getTime()+24*c*60*60*1e3);var f="expires="+e.toUTCString();return document.cookie=a+"="+b+";"+f+";path=/",d(a)},d=function(a){for(var b=a+"=",c=decodeURIComponent(document.cookie),d=c.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1);if(0===f.indexOf(b))return f.substring(b.length,f.length)}return!1}}(jQuery);